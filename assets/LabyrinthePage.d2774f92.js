var E=Object.defineProperty;var N=(x,f,u)=>f in x?E(x,f,{enumerable:!0,configurable:!0,writable:!0,value:u}):x[f]=u;var l=(x,f,u)=>(N(x,typeof f!="symbol"?f+"":f,u),u);import{Q as S}from"./QPage.efd61026.js";import{u as A,r as B,o as I,y as z,z as Q,x as R,P as T}from"./index.10fff4f4.js";import"./render.5753f336.js";const X=A({__name:"LabyrinthePage",setup(x){const f=B(),u=600,y=600,s=40;let r=null,p=0;I(()=>{!f.value||(r=f.value.getContext("2d"),console.log("HERE"),C())});function h(t,o){return t+o*Math.floor(u/s)}class _{constructor(o,i,n=!0,d=!0,a=!0,m=!0){l(this,"top");l(this,"bottom");l(this,"left");l(this,"right");l(this,"visited");l(this,"x");l(this,"y");l(this,"_index");l(this,"filled");this.top=n,this.bottom=d,this.left=a,this.right=m,this.x=o,this.y=i,this.visited=!1,this.filled=!1,this._index=h(this.x,this.y)}draw(){!r||(this.top&&this.drawLine(this.x,this.y,this.x+1,this.y),this.bottom&&this.drawLine(this.x,this.y+1,this.x+1,this.y+1),this.left&&this.drawLine(this.x,this.y,this.x,this.y+1),this.right&&this.drawLine(this.x+1,this.y,this.x+1,this.y+1))}drawLine(o,i,n,d){!r||(r.strokeStyle="#000000",r.beginPath(),r.moveTo(o*s,i*s),r.lineTo(n*s,d*s),r.stroke())}fill(){!r||(r.fillStyle=this.filled?"#ffffff":"#ff00ff",this.filled=!this.filled,r.fillRect(this.x*s+1,this.y*s+1,s-2,s-2))}}function v(t){const o=[];if(t.y>=1&&t.top){const i=h(t.x,t.y-1);console.log("can top"),e[i].visited||o.push(i)}if(t.y<Math.floor(y/s)-1&&t.bottom){const i=h(t.x,t.y+1);console.log("can bottom"),e[i].visited||o.push(i)}if(t.x>=1&&t.left){const i=h(t.x-1,t.y);console.log("can left"),e[i].visited||o.push(i)}if(t.x<Math.floor(y/s)-1&&t.right){const i=h(t.x+1,t.y);console.log("can right"),e[i].visited||o.push(i)}return o}function w(t){const o=[];if(t.y>=1&&!t.top){const i=h(t.x,t.y-1);o.push(i)}if(t.y<Math.floor(y/s)-1&&!t.bottom){const i=h(t.x,t.y+1);o.push(i)}if(t.x>=1&&!t.left){const i=h(t.x-1,t.y);o.push(i)}if(t.x<Math.floor(y/s)-1&&!t.right){const i=h(t.x+1,t.y);o.push(i)}return o}const e=[],b=[],g=[];let c=0;b.push(c);function C(){for(k(),e[e.length-1].right=!1;(c=b.pop())!==void 0;)for(let t=v(e[c]);t.length>0;t=v(e[c])){const o=t[Math.floor(Math.random()*t.length)];console.log(`${c} - ${o}`);const i=e[o],n=e[c];n.visited=!0,b.push(c),i.visited=!0,i.x==n.x?i.y>n.y?(i.top=!1,n.bottom=!1):(i.bottom=!1,n.top=!1):i.x>n.x?(i.left=!1,n.right=!1):(i.right=!1,n.left=!1),c=o}e.forEach(t=>{t.draw()}),e[0].fill()}function k(){for(let t=0;t<Math.floor(y/s);t++)for(let o=0;o<Math.floor(u/s);o++)e.push(new _(o,t))}function L(t,o){return w(e[t]).includes(o)}function P(t){var m,M;const o=t.offsetX,i=t.offsetY,n=Math.floor(o/s),d=Math.floor(i/s),a=h(n,d);L(p,a)&&!e[a].filled?(e[a].fill(),p=a,g.push(a)):a==p&&a!=0&&(e[a].fill(),p=(m=g.pop())!=null?m:0,p=(M=g.pop())!=null?M:0,g.push(p),console.log(p))}return(t,o)=>(R(),z(S,null,{default:Q(()=>[T("canvas",{id:"myCanvas",ref_key:"canvas",ref:f,width:u,height:y,onClick:P},null,512)]),_:1}))}});export{X as default};
